<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programa de Referidos - Lulo Panamá</title>
    <meta name="description" content="Gana dinero refiriendo personas a Lulo Panamá.">
    
    <!-- SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="Lulo">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img/faviconn.png">
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@400&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css"> <!-- Tu estilo global -->
    <link rel="stylesheet" href="referidos.css"> <!-- Estilo específico corregido -->
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header-container">
            <!-- Logo inicia en blanco (light-logo) porque el fondo del hero es oscuro -->
            <a href="/" class="logo light-logo" id="headerLogo">lulo</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="referral-hero">
            <div class="container">
                <div class="hero-content-center">
                    <span class="badge-pill"><i class="fas fa-star"></i> Programa de Partners</span>
                    <h1>Gana dinero con Lulo</h1>
                    <p>Refiere a personas que necesiten préstamos personales. Recibe el <strong>1% del monto total</strong> del préstamo una vez sea aprobado y desembolsado.</p>
                </div>
            </div>
        </section>

        <!-- Form Section -->
        <section class="referral-form-section">
            <div class="container">
                <div class="form-wrapper">
                    <div class="form-header">
                        <h2>Únete al Programa</h2>
                        <p>Completa tus datos para generar tu enlace único.</p>
                    </div>
                    
                    <form id="referralForm" class="referral-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name">Tu Primer Nombre</label>
                                <div class="input-icon-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="name" name="name" placeholder="Ej. Juan" required>
                                </div>
                                <div class="error-message" id="nameError"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">Correo Electrónico</label>
                                <div class="input-icon-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="email" name="email" placeholder="juan@ejemplo.com" required>
                                </div>
                                <div class="error-message" id="emailError"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Teléfono (WhatsApp)</label>
                            <div class="phone-input-container">
                                <div class="country-code">
                                    <img src="https://flagcdn.com/w20/pa.png" alt="PA"> +507
                                </div>
                                <input type="tel" id="phone" name="phone" placeholder="6000-0000" required>
                            </div>
                            <div class="error-message" id="phoneError"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="reason">¿Por qué quieres unirte?</label>
                            <textarea id="reason" name="reason" rows="3" placeholder="Cuéntanos brevemente cómo planeas referir clientes..." required></textarea>
                            <div class="error-message" id="reasonError"></div>
                        </div>
                        
                        <!-- CHECKBOX LOGIC -->
                        <div class="form-group terms-group">
                            <label class="checkbox-container" id="mainCheckboxLabel">
                                <input type="checkbox" id="terms" name="terms" required>
                                <span class="checkmark"></span>
                                <span class="terms-text">He leído y acepto los <button type="button" id="openTermsBtn" class="terms-link">Términos de Referidos</button></span>
                            </label>
                            <div class="error-message" id="termsError"></div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="submit-button">
                                <span>Enviar Solicitud</span>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-main">
                    <div class="footer-brand">
                        <div class="footer-logo">
                            <a href="/" class="logo footer-brand-logo" style="color: #fff;">lulo</a>
                        </div>
                        <p class="footer-description">
                            Conectamos personas con oportunidades financieras de manera simple, transparente y sin complicaciones.
                        </p>
                        <div class="social-media">
                            <a href="https://instagram.com/lulopanama" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>
                            <a href="https://facebook.com/lulopanama" target="_blank" class="social-link"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://tiktok.com/@lulopanama" target="_blank" class="social-link"><i class="fab fa-tiktok"></i></a>
                        </div>
                    </div>
                    
                    <div class="footer-links-section">
                        <h4>Legal</h4>
                        <div class="footer-links">
                            <a href="/legal/terminos">Términos y Condiciones</a>
                            <a href="/legal/privacidad">Política de Privacidad</a>
                        </div>
                    </div>
                    
                    <div class="footer-contact">
                        <h4>Contacto</h4>
                        <div class="contact-info">
                            <p><i class="fas fa-envelope"></i> hola@lulopanama.com</p>
                            <p><i class="fas fa-map-marker-alt"></i> Ciudad de Panamá, PA</p>
                        </div>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <div class="copyright">
                        <p>&copy; <span id="currentYear"></span> Lulo Panamá. Todos los derechos reservados.</p>
                    </div>
                    <div class="footer-badges">
                        <div class="security-badge"><i class="fas fa-shield-alt"></i><span>Datos Seguros</span></div>
                        <div class="security-badge"><i class="fas fa-lock"></i><span>SSL Certificado</span></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Términos de Referidos</h3>
                <span class="close-modal" id="closeTermsX">&times;</span>
            </div>
            <div class="modal-body">
                <div class="terms-scroll-container" id="termsContentScroll">
                    <h4>Política del Programa</h4>
                    <p><strong>Última actualización:</strong> <span id="termsDate"></span></p>

                    <h5>1. Introducción y Aceptación</h5>
                    <p>Al participar en el programa de referidos de Lulo Panamá, usted acepta cumplir con los siguientes términos y condiciones. Lulo Panamá se reserva el derecho de modificar estos términos en cualquier momento.</p>

                    <h5>2. Elegibilidad</h5>
                    <p>Para participar en el programa de referidos, debe ser mayor de 18 años, residir legalmente en la República de Panamá y contar con un documento de identidad válido.</p>

                    <h5>3. Mecánica de Comisiones</h5>
                    <p>Lulo Panamá pagará una comisión del 1% sobre el monto neto desembolsado del préstamo personal referido. El pago se realizará únicamente cuando el préstamo haya sido aprobado, firmado y efectivamente desembolsado.</p>

                    <h5>4. Proceso de Referencia</h5>
                    <p>El referido debe realizar su solicitud utilizando única y exclusivamente su enlace personalizado. No se aceptarán reclamos de referidos que hayan aplicado por otros canales.</p>

                    <h5>5. Ética y Uso de Datos</h5>
                    <p>Está estrictamente prohibido utilizar bases de datos compradas, robadas o recolectadas sin el consentimiento explícito. Lulo Panamá tiene una política de tolerancia cero ante el spam.</p>

                    <h5>6. Pagos</h5>
                    <p>Los pagos se coordinarán directamente con el socio referido una vez confirmado el desembolso. El socio es responsable de proporcionar la información bancaria correcta.</p>
                    
                    <h5>7. Terminación</h5>
                    <p>Nos reservamos el derecho de terminar su participación en el programa si detectamos actividades fraudulentas.</p>
                    
                    <p><br><br><em>Desplázate hasta el final para habilitar el botón.</em></p>
                    <p style="opacity: 0;">.</p> <!-- Espaciador para asegurar scroll -->
                </div>
            </div>
            <div class="modal-footer">
                <span class="scroll-hint" id="scrollHint">Lee todo el texto para continuar</span>
                <button id="acceptTermsBtn" class="accept-button" disabled>
                    <i class="fas fa-check"></i> He leído y Acepto
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content success-modal-content">
            <span class="close-success-modal">&times;</span>
            <div class="success-body">
                <div class="success-icon-wrapper">
                    <i class="fas fa-check"></i>
                </div>
                <h3>¡Registro Exitoso!</h3>
                <p>Bienvenido al equipo de partners de Lulo.</p>
                
                <div class="referral-link-box">
                    <label>Tu enlace personalizado:</label>
                    <div class="input-group">
                        <input type="text" id="referralLink" readonly>
                        <button id="copyLinkBtn">
                            <i class="far fa-copy"></i> Copiar
                        </button>
                    </div>
                </div>
                
                <div class="success-steps">
                    <div class="step">1. Comparte tu link</div>
                    <div class="step">2. Tus referidos aplican</div>
                    <div class="step">3. ¡Gana el 1% al desembolso!</div>
                </div>
                
                <button class="close-button" id="closeSuccessBtn">Entendido</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="ref.js"></script>
    <script src="analytics.js"></script>
    
    <!-- UI Logic Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos
            const termsModal = document.getElementById('termsModal');
            const openTermsBtn = document.getElementById('openTermsBtn');
            const closeTermsX = document.getElementById('closeTermsX');
            const scrollContainer = document.getElementById('termsContentScroll');
            const acceptBtn = document.getElementById('acceptTermsBtn');
            const scrollHint = document.getElementById('scrollHint');
            const mainCheckbox = document.getElementById('terms');
            const mainCheckboxLabel = document.getElementById('mainCheckboxLabel');
            const header = document.getElementById('header');
            const logo = document.getElementById('headerLogo');

            // --- HEADER & LOGO LOGIC ---
            function updateHeader() {
                if (window.scrollY > 10) {
                    header.classList.add('scrolled');
                    logo.classList.remove('light-logo');
                    logo.style.color = '#133058'; 
                } else {
                    header.classList.remove('scrolled');
                    logo.classList.add('light-logo');
                    logo.style.color = '#ffffff';
                }
            }
            window.addEventListener('scroll', updateHeader);
            updateHeader(); // Init

            // --- FECHAS ---
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            if(document.getElementById('termsDate')) {
                document.getElementById('termsDate').textContent = new Date().toLocaleDateString('es-PA');
            }

            // --- MODAL & CHECKBOX LOGIC ---
            
            function openModal() {
                termsModal.style.display = 'flex'; // Flex para centrar
            }

            // 1. Abrir desde el enlace
            openTermsBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                openModal();
            });

            // 2. Bloquear clic directo en el checkbox y abrir modal
            mainCheckboxLabel.addEventListener('click', function(e) {
                if (mainCheckbox.checked) return; // Si ya está marcado, no hacer nada

                // Si el clic no fue en el enlace (fue en la caja o texto)
                if (e.target !== openTermsBtn) {
                    e.preventDefault(); 
                    openModal();
                }
            });

            // 3. Cerrar Modal
            closeTermsX.addEventListener('click', () => termsModal.style.display = 'none');
            window.addEventListener('click', (e) => {
                if (e.target === termsModal) termsModal.style.display = 'none';
            });

            // 4. Scroll Logic
            scrollContainer.addEventListener('scroll', function() {
                // Detectar final del scroll
                const isAtBottom = (this.scrollHeight - this.scrollTop - this.clientHeight) < 10;
                
                if (isAtBottom) {
                    acceptBtn.disabled = false;
                    scrollHint.textContent = "¡Gracias! Ahora puedes aceptar.";
                    scrollHint.style.color = "#10b981";
                    scrollHint.style.fontWeight = "bold";
                }
            });

            // 5. Aceptar Términos
            acceptBtn.addEventListener('click', function() {
                if (!this.disabled) {
                    mainCheckbox.checked = true;
                    termsModal.style.display = 'none';
                    // Borrar error si existe
                    const errorDiv = document.getElementById('termsError');
                    if(errorDiv) errorDiv.textContent = '';
                }
            });
        });
    </script>
</body>
</html>
